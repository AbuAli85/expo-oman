================================================================================
FIX: HANDLE EXPO FORM RESPONSES SCENARIO
Complete Fix Guide
================================================================================

ISSUES FOUND:
-------------
1. ❌ Router filters checking wrong field ("Response" doesn't exist)
2. ❌ Module 3 (Update Row) incomplete - "Value must not be empty" error
3. ❌ Route 2 has placeholder instead of real modules
4. ❌ Missing email sending modules
5. ❌ Need to access form answers correctly

================================================================================
UNDERSTANDING FORM DATA STRUCTURE
================================================================================

From your form, the answers structure is:
- answers.1865fa7d = Name
- answers.677abd25 = "Will you attend the expo?"
- answers.08d2bdde = "Any additional comments or questions?"

To access the attendance answer:
{{1.answers.677abd25.textAnswers.answers[0].value}}

This will be: "Yes, I'll attend" or "No, I cannot attend"

To access email:
{{1.respondentEmail}}

To access name:
{{1.answers.1865fa7d.textAnswers.answers[0].value}}

To access comments:
{{1.answers.08d2bdde.textAnswers.answers[0].value}}

================================================================================
FIX 1: ROUTER FILTERS
================================================================================

CURRENT (WRONG):
----------------
Route 1 Filter: Response = "Accepted"
Route 2 Filter: Response = "Rejected"

FIXED:
------
Route 1 Filter:
- Field: {{1.answers.677abd25.textAnswers.answers[0].value}}
- Operator: equals
- Value: "Yes, I'll attend"

Route 2 Filter:
- Field: {{1.answers.677abd25.textAnswers.answers[0].value}}
- Operator: equals
- Value: "No, I cannot attend"

================================================================================
FIX 2: MODULE 3 (UPDATE ROW - ROUTE 1)
================================================================================

MODULE 3: Google Sheets → Update Row
-------------------------------------

Configuration:
- Spreadsheet: Your leads sheet
- Sheet: leads
- Mode: Search Rows (to find by email)

Search Filter:
- Column: Email (Column B, index 1)
- Operator: equals
- Value: {{1.respondentEmail}}

Values to Update:
- Response (Column K, index 10): "Accepted"
- Response Date (Column L, index 11): {{now}}
- Comments (Column M, index 12): {{1.answers.08d2bdde.textAnswers.answers[0].value}}

================================================================================
FIX 3: ROUTE 2 - REPLACE PLACEHOLDER
================================================================================

CURRENT:
--------
Placeholder module (wrong!)

FIXED:
------
Module 4: Google Sheets → Update Row
   - Same as Module 3, but:
   - Response: "Rejected"

Module 5: Resend → Send Thank You Email
   - To: {{1.respondentEmail}}
   - Subject: "Thank You - UAE Property Expo"
   - HTML: Thank you email template

================================================================================
FIX 4: ADD EMAIL MODULE TO ROUTE 1
================================================================================

After Module 3, add:

Module 4: Resend → Send Agreement Email
   - To: {{1.respondentEmail}}
   - From: sales@thesmartpro.io
   - Subject: "Agreement - UAE Property Expo"
   - HTML: Agreement email template

================================================================================
COMPLETE FIXED SCENARIO STRUCTURE
================================================================================

MODULE 1: Google Forms → Watch Responses ✅
   - Form: UAE Property Expo - Response
   - Limit: 1

MODULE 2: Router
   Route 1 Filter: {{1.answers.677abd25.textAnswers.answers[0].value}} = "Yes, I'll attend"
   Route 2 Filter: {{1.answers.677abd25.textAnswers.answers[0].value}} = "No, I cannot attend"

ROUTE 1 (ACCEPTED):
--------------------
Module 3: Google Sheets → Update Row
   - Find by: Email = {{1.respondentEmail}}
   - Update:
     * Response (K): "Accepted"
     * Response Date (L): {{now}}
     * Comments (M): {{1.answers.08d2bdde.textAnswers.answers[0].value}}

Module 4: Resend → Send Agreement Email
   - To: {{1.respondentEmail}}
   - Subject: "Agreement - UAE Property Expo"
   - HTML: Agreement template

ROUTE 2 (REJECTED):
--------------------
Module 5: Google Sheets → Update Row
   - Find by: Email = {{1.respondentEmail}}
   - Update:
     * Response (K): "Rejected"
     * Response Date (L): {{now}}
     * Comments (M): {{1.answers.08d2bdde.textAnswers.answers[0].value}}

Module 6: Resend → Send Thank You Email
   - To: {{1.respondentEmail}}
   - Subject: "Thank You - UAE Property Expo"
   - HTML: Thank you template

================================================================================
STEP-BY-STEP FIX
================================================================================

STEP 1: Fix Router Filters
---------------------------
1. Open Module 2 (Router)
2. Route 1:
   - Click Route 1
   - Add filter
   - Field: {{1.answers.677abd25.textAnswers.answers[0].value}}
   - Operator: equals
   - Value: "Yes, I'll attend"
3. Route 2:
   - Click Route 2
   - Add filter
   - Field: {{1.answers.677abd25.textAnswers.answers[0].value}}
   - Operator: equals
   - Value: "No, I cannot attend"
4. Save

STEP 2: Fix Module 3 (Update Row - Route 1)
---------------------------------------------
1. Open Module 3
2. Configuration:
   - Spreadsheet: Your leads sheet
   - Sheet: leads
   - Mode: Search Rows
3. Search Filter:
   - Column: Email (or index 1)
   - Operator: equals
   - Value: {{1.respondentEmail}}
4. Values to Update:
   - Column K (Response): "Accepted"
   - Column L (Response Date): {{now}}
   - Column M (Comments): {{1.answers.08d2bdde.textAnswers.answers[0].value}}
5. Save

STEP 3: Add Email Module to Route 1
------------------------------------
1. After Module 3, add: Resend → Send an Email
2. Configuration:
   - To: {{1.respondentEmail}}
   - From: sales@thesmartpro.io
   - Subject: "Agreement - UAE Property Expo"
   - HTML: Agreement email template
3. Save

STEP 4: Fix Route 2 - Remove Placeholder
------------------------------------------
1. Delete placeholder module
2. Add: Google Sheets → Update Row
   - Same as Module 3, but Response = "Rejected"
3. Add: Resend → Send an Email
   - Thank you email
4. Save

================================================================================
ALTERNATIVE: USE SET VARIABLES FOR CLEANER CODE
================================================================================

Add Module 2.5 (Set Variables) after Module 1:

Variables:
- email: {{1.respondentEmail}}
- name: {{1.answers.1865fa7d.textAnswers.answers[0].value}}
- attendance: {{1.answers.677abd25.textAnswers.answers[0].value}}
- comments: {{1.answers.08d2bdde.textAnswers.answers[0].value}}

Then use:
- {{2.email}} instead of {{1.respondentEmail}}
- {{2.attendance}} instead of long path
- {{2.name}} instead of long path
- {{2.comments}} instead of long path

This makes the code cleaner!

================================================================================
QUICK FIX CHECKLIST
================================================================================

□ Router filters check: {{1.answers.677abd25.textAnswers.answers[0].value}}
□ Route 1 filter: "Yes, I'll attend"
□ Route 2 filter: "No, I cannot attend"
□ Module 3: Update Row configured (find by email, update Response/Date/Comments)
□ Module 4: Send Agreement Email (Route 1)
□ Module 5: Update Row configured (Route 2)
□ Module 6: Send Thank You Email (Route 2)
□ All modules saved
□ Scenario is ON

================================================================================

